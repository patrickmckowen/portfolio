import type { OAuthClientProvider } from "@modelcontextprotocol/sdk/client/auth.js";
import type { OAuthClientInformation, OAuthClientInformationFull, OAuthClientMetadata, OAuthTokens } from "@modelcontextprotocol/sdk/shared/auth.js";
import type { McpOAuthState } from "./types.js";
export interface FileOAuthProviderOptions {
    serverUrl: string;
    redirectUri: string;
    clientName: string;
    tokens?: OAuthTokens;
    clientInformation?: OAuthClientInformation;
    codeVerifier?: string;
    /**
     * Called when tokens are updated (initial save or refresh).
     * Use this to persist the new state.
     */
    onStateUpdated?: (state: McpOAuthState) => void;
}
/**
 * File-based OAuth provider implementation for CLI usage.
 * Implements the OAuthClientProvider interface from MCP SDK.
 *
 * Unlike server-based implementations that use a database,
 * this stores state in memory and calls onStateUpdated for persistence.
 */
export declare class FileOAuthProvider implements OAuthClientProvider {
    private _clientInformation;
    private _codeVerifier;
    private _tokens;
    private _redirectStartAuthUrl;
    private readonly serverUrl;
    private readonly redirectUri;
    private readonly clientName;
    private readonly onStateUpdated?;
    constructor(options: FileOAuthProviderOptions);
    get redirectUrl(): string;
    /**
     * The authorization URL to redirect the user to.
     * Set by redirectToAuthorization().
     */
    get redirectStartAuthUrl(): URL | undefined;
    clientInformation(): Promise<OAuthClientInformation | undefined>;
    saveClientInformation(clientInformation: OAuthClientInformationFull): Promise<void>;
    codeVerifier(): Promise<string>;
    saveCodeVerifier(codeVerifier: string): Promise<void>;
    get clientMetadata(): OAuthClientMetadata;
    /**
     * Called by the MCP SDK when the user needs to be redirected to authorize.
     * We store the URL so the CLI can open it in the browser.
     */
    redirectToAuthorization(authorizationUrl: URL): void;
    tokens(): Promise<OAuthTokens | undefined>;
    saveTokens(tokens: OAuthTokens): Promise<void>;
    /**
     * Get the current state for persistence
     */
    getState(): McpOAuthState;
    private notifyStateUpdated;
}
/**
 * Create a FileOAuthProvider for use with MCP transports.
 * This is the simpler factory function for common use cases.
 */
export declare function createFileOAuthProvider(options: FileOAuthProviderOptions): FileOAuthProvider;
//# sourceMappingURL=oauth-provider.d.ts.map